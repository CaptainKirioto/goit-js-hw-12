{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport '../css/styles.css';\n\nexport async function getImage(page = 1, requestedImg) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const response = await axios.get(BASE_URL, {\n    params: {\n      page,\n      per_page: 15,\n      key: '44178222-91171e7a1f266369aa2a731c5',\n      q: requestedImg,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}\n","/* ----------- SimpleLightbox ----------- */\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n/* ------------------------------ */\n\nexport function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n<li class=\"gallery-item\">\n  <a class=\"img-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-img\" alt=\"${tags}\" src=${webformatURL}></img> </a>\n    <div class=\"stats-container\">\n      <span class=\"stats-info\"><h5>Likes:</h5><p>${likes}</p></span>\n      <span class=\"stats-info\"><h5>Views:</h5><p>${views} </p></span>\n      <span class=\"stats-info\"><h5>Comments:</h5><p>${comments}</p></span>\n      <span class=\"stats-info\"><h5>Downloads:</h5><p>${downloads}</p></span>\n    </div>\n</li >\n`\n    )\n    .join('');\n}\n\nexport function lightboxImg() {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: '250ms',\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n","/* ----------- iziToast ----------- */\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n/* --------- Function import --------- */\n\nimport { getImage } from './js/pixabay-api';\nimport { createMarkup, lightboxImg } from './js/render-functions';\n\n/* --------- DOM-elements Search --------- */\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-btn');\n\n/* --------- Loader & Loader Button --------- */\n\nfunction showLoader() {\n  loader.style.visibility = 'visible';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showLoadMore() {\n  loadMore.style.visibility = 'visible';\n}\n\nfunction hideLoadMore() {\n  loadMore.style.visibility = 'hidden';\n}\n\n/* --------- Main Programm --------- */\n\nhideLoader();\nhideLoadMore();\n\nform.addEventListener('submit', searchImg);\n\nlet page = 1;\nlet limit = 15;\nlet totalPages = null;\nlet query = null;\n\nlet rect = null;\n\nfunction searchImg(event) {\n  event.preventDefault();\n\n  const newQuery = event.target.elements.search.value.trim();\n  if (!newQuery) {\n    return iziToast.show({\n      message: \"You can't do that here\",\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n    });\n  }\n  if (newQuery.length > 100) {\n    return iziToast.show({\n      message: \"It's too long, buddy\",\n      position: 'topRight',\n      backgroundColor: '#EF4040',\n      messageColor: '#FFFFFF',\n    });\n  }\n\n  query = newQuery;\n  gallery.innerHTML = '';\n  page = 1;\n  hideLoadMore();\n  showLoader();\n\n  getImage(page, query)\n    .then(data => {\n      if (data.hits.length != 0) {\n        gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n        lightboxImg();\n        totalPages = Math.ceil(data.totalHits / limit);\n        if (page < totalPages) {\n          showLoadMore();\n        }\n\n        if (!rect) {\n          const galleryItem = document.querySelector('.gallery-item');\n          rect = galleryItem.getBoundingClientRect();\n        }\n        event.target.elements.search.value = '';\n      } else {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your</br> search query. Please try again!',\n          maxWidth: '432px',\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          messageColor: '#FFFFFF',\n        });\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nloadMore.addEventListener('click', onLoadMore);\n\nasync function onLoadMore(event) {\n  page += 1;\n  try {\n    const data = await getImage(page, query);\n    gallery.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    lightboxImg();\n    window.scrollBy({\n      top: rect.height * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    if (page >= totalPages) {\n      hideLoadMore();\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: '432px',\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#FFFFFF',\n      });\n    }\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n"],"names":["getImage","page","requestedImg","BASE_URL","axios","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightboxImg","SimpleLightbox","form","gallery","loader","loadMore","showLoader","hideLoader","showLoadMore","hideLoadMore","searchImg","limit","totalPages","query","rect","event","newQuery","iziToast","data","error","onLoadMore"],"mappings":"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"}